{% extends 'base.html' %}

{% load static %}

{% block title %}test_result.html{% endblock %}
{% block extra-style %}
<style>
  .A4-size {
    width: 770px;
    height: 1089px;
  }

  .A4plus-size {
    width: 920px;
    height: 1301px;
    box-sizing: border-box;
  }

  .bg-yellow-200 {
    background-color: #FEF9C3;
  }
  
  .bg-cyan-200 {
    background-color: #9cdbff; /* 예시 색상 코드, 실제 프로젝트에서 원하는 색상 코드로 조정 */
  }  

  .fixed-table {
    table-layout: fixed;
    width: 100%; /* 전체 너비를 지정 */
  }

  .custom-col {
    width: 6.5%;
  }

  .whfooter {
    width: 96%;
    height: 50px
  }
  
  .carouselcontrolbutton {
    width: 100px;
    height: 40px;
    margin: 2px 15px 5px 15px;
  }

  .pdfdown {
    width: 220px;
    height: 60px;
  }

  #footer {
    background-image: url("{% static 'assets/pns_footer_logo.png' %}");
    padding: 10px 0px 10px 0px;
    background-repeat: no-repeat;
    background-position: center;
    background-size: contain;
  }
  
  #logo {
    background-image: url("{% static 'assets/pns_logo.jpg' %}");
    background-repeat: no-repeat;
    background-position: center;
    background-size: contain;
    height: 40px
  }
</style>
{% endblock %}

{% block content %}

<div class="d-flex flex-column justify-content-around mt-3">
  <div class="d-flex justify-content-center">
    <div class="d-flex flex-column justify-content-center mx-5">
      <div class="align-items-center">
        <button class="btn btn-dark" @click="carouselPageLeft">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Previous</span>
        </button>
      </div>
    </div>
    <div class="d-flex flex-column">
      <div id="carouseldark" class="carousel carousel-dark slide">
        <div class="carousel-inner">
          <div class="carousel-item active">
            <div class="d-flex justify-content-center" v-if="carouselPage == 1" data-carousel-item>
              <div id="capture-area1" class="A4plus-size">
                <div class="d-flex flex-column justify-content-center px-4 shadow bg-dark w-100 h-100">
                  <div class="border border-light rounded bg-white d-flex flex-column">
                    <!-- header -->
                    <div class="d-flex justify-content-between border-bottom border-4 border-gray-400">
                      <div class="d-flex">
                        <div id="logo" class="fs-4 fw-bold mt-3 ms-5 px-4"></div>
                        <div class="fs-4 fw-bold pt-3">
                          PNS수학
                        </div>
                      </div>          
                      <div class="#">
                        <p class="fs-4 fw-bold pt-3 px-5">
                          수학 완전학습
                        </p>
                      </div>
                    </div>
                    {% comment %} MPI(Mathematical Potential Index) test
                    수리적 능력. 즉,  기초적인 수리 능력을 진단하고 그 요인이 되는 계산력, 이해력, 추론력, 문제해결력의 네 가지 요인별로 수리적 정보 처리 능력을 측정합니다. 학생의 현재 수리언어의 처리 능력을 종합적으로 진단합니다. 이 결과와 본 연구소의 통계 데이터를 기반으로 자체 개발한 AI가 중·고등학교에서의 성적을 정밀 예측합니다.{% endcomment %}
            
                    <!-- base score and ratio -->
                    <div class="d-flex justify-content-around border-bottom border-2">
                      <div class="w-25 border-3 border-bottom mb-1 pb-1 text-center">
                        <span class="fw-bold fs-4">원점수</span> :
                        <span class="fw-bold fs-3 text-danger">[[ Score ]]</span>
                      </div>
                      <div class="w-25 border-3 border-bottom mb-1 pb-1 text-center">
                        <span class="fw-bold fs-4">전국 백분위</span> :
                        <span class="fw-bold fs-3 text-primary">[[ NationalPredictRatio ]]</span>
                      </div>
                    </div>
                    
                    <!-- intro -->
                    <div class="d-flex justify-content-center border-bottom border-2">
                      <div class="w-75 p-3 my-2 pb-3">
                        <div class="d-flex justify-content-center mt-1">
                          <div class="d-flex flex-column justify-content-center align-items-start w-83">
                            <div>
                              ● <span class="fw-bold">MPI 학력평가</span>는
                              교육과정에 맞추어 학생들의 실력을 측정하여 예상
                              데이터를<br />&ensp;&ensp;제시하고자 합니다.<br />
                            </div>
                            <div class="mt-2">
                              ● <span class="fw-bold">기초적인 수리 능력</span>을 진단하고
                              네 가지 요인별로 수리적 정보 처리 능력을<br />&ensp;&ensp;측정합니다.<br />
                            </div>
                            <div class="mt-4">
                              ● 아울러 <span class="fw-bold">MPI 학력평가</span>의
                              특징을 살펴보면 다음과 같습니다.<br />
                            </div>
                          </div>
                        </div>
                        <div class="d-flex justify-content-center mt-2">
                          <div class="d-flex flex-column justify-content-center align-items-start w-83">
                            <div>
                              <span class="fw-bold">첫째,</span> 수학적인
                              원리와 개념을 정확히 알고 있는지 평가하도록 하였습니다.<br />
                              <span class="fw-bold">둘째,</span>
                              교육과정의 내용을 잘 이해하고 있는지 평가하도록 하였습니다.<br />
                              <span class="fw-bold">셋째,</span> 수학적
                              사고력, 창의력, 문제해결력의 척도를 평가하도록 하였습니다.<br />
                              <span class="fw-bold">넷째,</span> 개인별
                              추후 예상 등급을 주어 학습방향을 제시해 주고 있습니다.<br />
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
            
                    <!-- predict high school ratios -->
                    <div class="d-flex justify-content-evenly">
                      <div class="d-flex flex-column justify-content-start w-50 border-bottom border-2 py-3 mt-1 text-center">
                        <span class="fw-bold fs-4" style="color: #4a5568;">수 능 &ensp; 예 상 &ensp; 등 급</span>
                        <div class="d-flex justify-content-center">
                          <div class="w-25">
                            <span class="fw-bold fs-3" style="color: #ec4899;">[[ SuneungPredictGrade ]]</span>
                          </div>
                        </div>
                      </div>
                      <div class="d-flex flex-column w-50 border-start border-bottom border-2 py-3 mt-1 text-center">
                        <span class="fw-bold fs-4" style="color: #4a5568;">고 1 &ensp; 내 신 &ensp; 예 상 &ensp; 등 급</span>
                        <div class="d-flex justify-content-center">
                          <div class="w-25">
                            <span class="fw-bold fs-3" style="color: #ec4899;">[[ HighSchoolPredictGrade[1] ]] ~ [[ HighSchoolPredictGrade[0] ]]</span>
                          </div>
                        </div>
                      </div>
                    </div>
            
                    <!-- predict middle school ratios -->
                    <div class="d-flex justify-content-evenly border-bottom border-2 py-3">
                      <div class="d-flex flex-column w-50 p-2 text-center" style="height: 5rem;">
                        <span class="fw-bold fs-4">중학교 &ensp; 내신 &ensp; 예상 &ensp; 백분위</span>
                        <div class="w-100 d-flex justify-content-center">
                          <div class="w-50 align-items-center">
                            <div class="d-flex justify-content-between">
                              <div class="fw-bold fs-3" style="color: #06b6d4;">[[ selectedTerritory_low ]]</div>
                              <div>~</div>
                              <div class="fw-bold fs-3" style="color: #06b6d4;">[[ selectedTerritory_high ]]</div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
            
                    <!-- math ability -->
                    <div class="d-flex justify-content-center w-100 border-bottom border-2">
                      <div class="d-flex flex-column pb-3 mx-1 mb-0" style="margin-bottom: 0.125rem !important;">

                        <!-- math ability data numbers -->
                        <div class="d-flex justify-content-center">
                          <div class="d-flex flex-column w-75 pb-3 mx-1 mb-0" style="margin-bottom: 0.125rem !important;">
                            <div class="d-flex justify-content-center">
                              <div class="mt-3 mb-2 fs-3 fw-bold align-items-center">수학적 능력 분석</div>
                            </div>
                            <div class="mb-1 d-flex justify-content-around">
                              <div class="d-flex flex-column align-items-center">
                                <span class="fs-5 fw-bold text-black border-bottom border-2">원점수</span>
                                <span class="ms-3 fs-2 fw-bold text-danger">[[ Score ]]</span>
                              </div>
                              <div class="d-flex flex-column align-items-center">
                                <span class="fs-5 fw-bold text-black border-bottom border-2">계산력</span>
                                <span class="ms-3 fs-2 fw-bold text-danger">[[ MathAbility[0] ]]</span>
                              </div>
                              <div class="d-flex flex-column align-items-center">
                                <span class="fs-5 fw-bold text-black border-bottom border-2">이해력</span>
                                <span class="ms-3 fs-2 fw-bold text-danger">[[ MathAbility[1] ]]</span>
                              </div>
                              <div class="d-flex flex-column align-items-center">
                                <span class="fs-5 fw-bold text-black border-bottom border-2">추론력</span>
                                <span class="ms-3 fs-2 fw-bold text-danger">[[ MathAbility[2] ]]</span>
                              </div>
                              <div class="d-flex flex-column align-items-center">
                                <span class="fs-5 fw-bold text-black border-bottom border-2">문제해결력</span>
                                <span class="ms-3 fs-2 fw-bold text-danger">[[ MathAbility[3] ]]</span>
                              </div>
                            </div>
                          </div>
                        </div>
                        
                        <!-- chart and analysis -->
                        <div class="d-flex justify-content-around">
                          <div class="d-flex flex-column" style="margin-bottom: 0.125rem !important;">
                            <div class="#">
                              <canvas id="radarChart"></canvas>
                            </div>
                          </div>
                          <div class="d-flex flex-column justify-content-around text-xs" style="width: 60%;">
                            <div class="d-flex justify-content-between w-100">
                              <div class="d-flex justify-content-between align-self-center bg-light" style="width: 30%; height: 2rem;">
                                <div class="align-self-center ms-1  fw-semibold" style="font-size: 0.875rem;">
                                  계산력
                                </div>
                                <div class="d-flex justify-content-center align-self-center" style="width: 33.33%;">
                                  <span class="text-danger" style="font-size: 1.125rem;">[[ MathAbility[0] ]]</span>
                                </div>
                              </div>
                              <div class="mx-2 align-self-center fw-bold" style="width: 100%;">
                                수학의 가장 밑바탕이 되는 능력으로 수학적 능력을 향상시키는데 있어 가장 기본이며 근본적인 것
                              </div>
                            </div>
                            <div class="d-flex justify-content-between w-100">
                              <div class="d-flex justify-content-between align-self-center bg-light" style="width: 30%; height: 2rem;">
                                <div class="align-self-center ms-1  fw-semibold" style="font-size: 0.875rem;">
                                  이해력
                                </div>
                                <div class="d-flex justify-content-center align-self-center" style="width: 33.33%;">
                                  <span class="text-danger" style="font-size: 1.125rem;">[[ MathAbility[1] ]]</span>
                                </div>
                              </div>
                              <div class="mx-2 align-self-center fw-bold" style="width: 100%;">
                                수학적 기본 개념과 원리가 갖는 의미를 파악하고, 문제의 핵심을 수학적 상황으로 생각할 수 있는 능력
                              </div>
                            </div>
                            <div class="d-flex justify-content-between w-100">
                              <div class="d-flex justify-content-between align-self-center bg-light" style="width: 30%; height: 2rem;">
                                <div class="align-self-center ms-1  fw-semibold" style="font-size: 0.875rem;">
                                  추론력
                                </div>
                                <div class="d-flex justify-content-center align-self-center" style="width: 33.33%;">
                                  <span class="text-danger" style="font-size: 1.125rem;">[[ MathAbility[2] ]]</span>
                                </div>
                              </div>
                              <div class="mx-2 align-self-center fw-bold" style="width: 100%;">
                                수학의 개념과 원리를 바탕으로 상호 관련성 속에서 문제 해결에 필요한 원리와 개념을 찾는 수학적 사고 능력
                              </div>
                            </div>
                            <div class="d-flex justify-content-between w-100">
                              <div class="d-flex justify-content-between align-self-center bg-light" style="width: 30%; height: 2rem;">
                                <div class="align-self-center ms-1  fw-semibold" style="font-size: 0.875rem;">
                                  문제해결력
                                </div>
                                <div class="d-flex justify-content-center align-self-center" style="width: 33.33%;">
                                  <span class="text-danger" style="font-size: 1.125rem;">[[ MathAbility[3] ]]</span>
                                </div>
                              </div>
                              <div class="mx-2 align-self-center fw-bold" style="width: 100%;">
                                수학적 개념과 원리를 바탕으로 문제해결법을 찾아내며 결과의 적합성과 유용성 등을 점검할 수 있는 능력
                              </div>
                            </div>
                          </div>
                          
                        </div>
                      </div>
                    </div>
            
                    <!-- footer -->
                    <div class="flex justify-content-center">
                      <div id="footer" class="whfooter border-t-2 py-2 my-1"></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="carousel-item active">
            <div class="d-flex justify-content-center" v-if="carouselPage == 2" data-carousel-item>
              <div id="capture-area2" class="A4plus-size">
                <div class="d-flex flex-column justify-content-center px-4 shadow bg-dark w-100 h-100">
                  <div class="border border-light rounded bg-white d-flex flex-column">
            
                    <!-- header -->
                    <div class="d-flex justify-content-between border-bottom border-4 border-gray-400">
                      <div class="d-flex">
                        <div id="logo" class="fs-4 fw-bold mt-3 ms-5 px-4"></div>
                        <div class="fs-4 fw-bold pt-3">
                          PNS수학
                        </div>
                      </div>          
                      <div class="#">
                        <p class="fs-4 fw-bold pt-3 px-5">
                          수학 완전학습
                        </p>
                      </div>
                    </div>
            
                    <!-- O/X analysis -->
                    <div class="d-flex justify-content-between flex-column">
                      <!-- O/X title -->
                      <div class="d-flex justify-content-evenly align-items-center mt-3 mb-1">
                        <div class="w-25 h-auto border-bottom border-2 text-center my-1 fs-4 fw-bold" style="height: 2.5rem;">
                          오답 문항 분석 자료
                        </div>
                      </div>
            
                      <!-- O/X table-->
                      <div class="">
                        <div class="">
                          <div class="">
                            <!-- <table class="table table-striped-columns fixed-tabel table-sm text-center"> -->
                            <table class="table table-striped fixed-tabel table-sm text-center">
                              <thead class="table-dark">
                                <tr>
                                  <th scope="col" class="text-white">번호</th>
                                  <th scope="col" v-for="number in 14" :key="'header-' + number" class="text-center custom-col text-white">[[ number ]]</th>
                                </tr>
                              </thead>
                              <tbody>
                                <tr>
                                  <th scope="row">배점</th>
                                  <td v-for="(score, index) in 14" :key="'score-' + index" class="text-center custom-col">4</td>
                                </tr>
                                <tr>
                                  <th scope="row">정답</th>
                                  <td v-for="(input, index) in AnswerList1" :key="'answer-' + index" class="text-center custom-col">[[ input ]]</td>
                                </tr>
                                <tr class="border-bottom border-2">
                                  <th scope="row">학생답</th>
                                  <td  v-for="(answer, index) in ExamResults1" :key="'result-'+index" class="text-center custom-col">[[ answer ]]</td>
                                </tr>
                                <tr class="table-dark">
                                  <td scope="col" class=" fw-bold text-white">번호</td>
                                  <td scope="col" v-for="number in rangeNumbers" :key="'header-' + number" class="text-center custom-col fw-bolder text-white">[[ number ]]</td>
                                  <td scope="col" class="fw-bold">점수</td>                      
                                  <td scope="col" class="fw-bold">총점</td>
                                  <td scope="col"></td>
                                </tr>
                                <tr>
                                  <th scope="row">배점</th>
                                  <td v-for="(score, index) in 11" :key="'score-' + index" class="text-center custom-col">4</td>
                                  <td scope="col" class="fw-bold">[[ Score ]]</td>
                                  <td scope="col">100</td>
                                  <td scope="col"></td>
                                </tr>
                                <tr>
                                  <th scope="row">정답</th>
                                  <td v-for="(input, index) in AnswerList2" :key="'answer-' + index" class="text-center custom-col">[[ input ]]</td>
                                  <td scope="row" class="custom-col"></td>
                                  <td scope="row" class="custom-col"></td>
                                  <td scope="row" class="custom-col"></td>
                                </tr>
                                <tr>
                                  <th scope="row">학생답</th>
                                  <td  v-for="(answer, index) in ExamResults2" :key="'result-'+index" class="text-center custom-col">[[ answer ]]</td>
                                  <td scope="row" class="custom-col"></td>
                                  <td scope="row" class="custom-col"></td>
                                  <td scope="row" class="custom-col"></td>
                                </tr>
                              </tbody>
                            </table>
                          </div>
                        </div>
                      </div>
                    </div>
            
                    <!-- strong and weak points -->
                    <div class="d-flex justify-content-center">
                      <div class="w-100 h-100 border-bottom border-2">
                        <div class="d-flex flex-column justify-content-center h-100 py-2 mt-1">
                          <div class="d-flex justify-content-center pb-2 border-bottom border-2">
                            <div class="border-bottom border-2 text-center w-25 fs-4 fw-bold">
                              강점 및 약점 분석
                            </div>
                          </div>
                          <div class="px-3 d-flex pt-2">
                            <div class="w-8 border-right border-2 d-flex flex-column justify-content-center">
                              <div class="fw-bold ps-3">강점</div>
                            </div>
                            <ul v-if="StrongPoint && StrongPoint.length"
                              class="d-flex flex-column justify-content-start w-100 pt-2">
                              <li v-for="(item, index) in StrongPoint" :key="'strong-' + index" class="list-unstyled fs-6">
                                &ensp;&#149;&nbsp;[[ item ]]
                              </li>
                            </ul>
                            <div v-else>강점이 없습니다</div>
                          </div>
                          <div class="px-3 d-flex pt-2 border-top border-2">
                            <div class="w-8 border-right border-2 d-flex flex-column justify-content-center">
                              <div class="fw-bold ps-3">약점</div>
                            </div>
                            <ul v-if="WeakPoint && WeakPoint.length"
                              class="d-flex flex-column justify-content-start w-100 pt-2">
                              <li v-for="(item, index) in WeakPoint" :key="'weak-' + index" class="list-unstyled fs-6">
                                &ensp;&#149;&nbsp;[[ item ]]
                              </li>
                            </ul>
                            <div v-else>약점이 없습니다</div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <!-- footer -->
                    <div class="flex justify-content-center">
                      <div id="footer" class="whfooter border-t-2 my-1"></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="carousel-item active">
            <div class="d-flex justify-content-center" v-if="carouselPage == 3" data-carousel-item>
              <div id="capture-area3" class="A4plus-size">
                <div class="d-flex flex-column justify-content-center px-4 shadow bg-dark w-100 h-100">
                  <div class="border border-light rounded bg-white d-flex flex-column">
            
                    <!-- header -->
                    <div class="d-flex justify-content-between border-bottom border-4 border-gray-400">
                      <div class="d-flex">
                        <div id="logo" class="fs-4 fw-bold mt-3 ms-5 px-4"></div>
                        <div class="fs-4 fw-bold pt-3">
                          PNS수학
                        </div>
                      </div>          
                      <div class="#">
                        <p class="fs-4 fw-bold pt-3 px-5">
                          수학 완전학습
                        </p>
                      </div>
                    </div>
            
                    <!-- Office Regional Predict Percentile -->
                    <div class="border-bottom border-2">
                      <div class="w-40 h-10 d-flex justify-content-evenly mt-3 mb-1">
                        <div class="border-2 border-bottom p-3 my-1 fs-5 fw-bold">
                          교육청 권역별 예상 백분위
                        </div>
                      </div>
                      <div class="d-flex justify-content-center">
                        <div class="d-flex justify-content-center align-items-center w-100 my-2 py-3 container">
                          <div class="d-flex justify-content-center align-items-center w-100 border-2 row">
            
                            <div v-for="(region, index) in OfficeRegion" :key="index" class="d-flex justify-content-center col-md-6 align-items-center my-2" style="width: 18rem; height: 9rem;">
                              <div class="card align-items-center">
                                <div class="card-body d-flex row justify-content-center w-100">
                                  <div class="d-flex justify-content-center align-items-center h-50">
                                    <h5 class="card-title text-center">[[ region ]]</h5>
                                  </div>
                                  <div class="d-flex justify-content-between w-100 h-auto">
                                    <div class="card-text text-center flex-grow-1 text-warning bg-yellow-200">[[ otherTerritories_low[index].value ]]</div>
                                    <div class="card-text text-center flex-grow-1 text-blue-500 bg-cyan-200">[[ otherTerritories_high[index].value ]]</div>
                                  </div>
                                </div>
                                <div>
                                  <!-- <canvas :id="'horizontalBarChart' + index"></canvas> -->
                                  <canvas :id="'horizontalBarChart' + index"></canvas>
                                </div>
                              </div>
                            </div>
                            
                          </div>
                        </div>
                      </div>
                    </div>
            
                    <!-- footer -->
                    <div class="flex justify-content-center">
                      <div id="footer" class="whfooter border-t-2 py-2 my-1"></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="d-flex flex-column justify-content-center mx-5">
      <div class="align-items-center">
        <button class="btn btn-dark" @click="carouselPageRight">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Next</span>
        </button>
      </div>
    </div>
  </div>

  <div class="d-flex justify-content-center my-2">
    <button type="button" 
            :class="[carouselPage === 1 ? 'carouselcontrolbutton btn btn-info' : 'carouselcontrolbutton btn btn-secondary']" 
            @click="carouselControl(1)">1</button>
    <button type="button" 
            :class="[carouselPage === 2 ? 'carouselcontrolbutton btn btn-info' : 'carouselcontrolbutton btn btn-secondary']" 
            @click="carouselControl(2)">2</button>
    <button type="button" 
            :class="[carouselPage === 3 ? 'carouselcontrolbutton btn btn-info' : 'carouselcontrolbutton btn btn-secondary']" 
            @click="carouselControl(3)">3</button>
  </div>

  <div class="d-flex justify-content-center">
    <button type="button" class="btn btn-primary pdfdown fs-4 mb-5" @click="captureAndDownload">pdf 다운로드</button>
  </div>
</div>


{% endblock %}

{% block extra-script %}
{% include 'include/test_result_vue.html' %}
{% endblock %}