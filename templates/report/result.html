{% extends 'base.html' %}

{% load static %}

{% block title %}test_result.html{% endblock %}
{% block extra-style %}
<style>
  .A4-size {
    width: 770px;
    height: 1089px;
  }

  .A4plus-size {
    width: 920px;
    height: 1301px;
    box-sizing: border-box;
  }

  .inside-area {
    width: 872px;
    height: 1250px;
    background-color: rgba(100, 100, 100, 255);
  }

  .bg-yellow-200 {
    background-color: #FEF9C3;
  }
  
  .bg-cyan-200 {
    background-color: #9cdbff; /* 예시 색상 코드, 실제 프로젝트에서 원하는 색상 코드로 조정 */
  }  

  .fixed-table {
    table-layout: fixed;
    width: 100%; /* 전체 너비를 지정 */
  }

  .custom-col {
    width: 6.5%;
  }

  .whfooter {
    width: 96%;
    height: 50px
  }
  
  .carouselcontrolbutton {
    width: 100px;
    height: 40px;
    margin: 2px 15px 5px 15px;
  }

  .pdfdown {
    width: 220px;
    height: 60px;
  }

  .footer-container{
    display: flex;
    justify-content: center; /* 가로 방향 중앙 정렬 */
    align-items: center; /* 세로 방향 중앙 정렬 */
  }

  #footer {
    background-image: url("{% static 'assets/pns_footer_logo.png' %}");
    padding: 10px 0px 10px 0px;
    background-repeat: no-repeat;
    background-position: center;
    background-size: contain;
    height: 60px
  }
  
  #logo {
    background-image: url("{% static 'assets/pns_logo.jpg' %}");
    background-repeat: no-repeat;
    background-position: center;
    background-size: cover;
    margin: 15px 5px;
    display: block;
    height: 60px;
    width: 60px;
  }

  .headerbox{
    height: 100px;
  }

  #mpi-title{
    font-size: 80px;
    line-height: 80px;
    margin: 0px;
    padding: 0px;
  }

  #top-mpi-title {
    font-size: 45px;
    line-height: 45px;
    margin-top: 10px;
    padding: 0px;
  }

  #mpi-mean{
    font-size: 25px;
    line-height: 25px;
  }

  #total-score{
    font-size: 130px;
    line-height: 100px;
    margin-top: 10px;
    padding-top: 0px;
  }

  #national-percentile {
    font-size: 70px;
    line-height: 70px;
    margin-top: 20px;
    padding: 0px;
  }
</style>
{% endblock %}

{% block content %}

<div class="d-flex flex-column justify-content-around mt-3">
  <div class="d-flex justify-content-center">
    <div class="d-flex flex-column justify-content-center mx-5">
      <div class="align-items-center">
        <button class="btn btn-dark" @click="carouselPageLeft">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Previous</span>
        </button>
      </div>
    </div>

    <div class="d-flex flex-column">
      <div id="carouseldark" class="carousel carousel-dark slide">
        <div class="carousel-inner">

          <!-- 결과 페이지 커버 -->
          <div class="carousel-item active">
            <div class="d-flex justify-content-center" v-if="carouselPage == 0" data-carousel-item>
              <div id="capture-area0" class="A4plus-size">
                <div class="d-flex flex-column justify-content-center px-4 shadow bg-dark w-100 h-100">
                  <div class="inside-area border border-light rounded bg-white d-flex flex-column">

                    <!-- header -->
                    <div class="d-flex justify-content-center m-5 border-gray-400">
                      <div class="d-flex">
                        <div id="logo"></div>
                        <div class="fs-1 fw-bold pt-3">
                          PNS수학
                        </div>
                      </div>
                    </div>

                    <!-- base score and ratio -->
                    <div class="w-100 text-center">
                      <div id="mpi-title" class="fw-border text-info">MPI TEST</div>
                      <div id="mpi-mean" class="fw-medium">Mathematical Potential Index</div>
                    </div>
                    
                    <!-- intro -->
                    <div class="d-flex justify-content-center m-5 p-5">
                      <div id="mpi-title" class="fw-bold">결과지</div>
                    </div>
            
                    <!-- predict high school ratios -->
                    <div class="d-flex flex-column my-5 py-5 mx-3 px-5 bg-info-subtle">
                      <div class="d-flex flex-column justify-content-start py-3 mt-1">
                        <span class="fw-bold fs-4 mt-3">▶ MPI Test를 통해 수학적 잠재 능력을 분석할 수 있습니다.</span>
                        <span class="fw-border mt-3">MPI Test를 통해 기초적인 수리 능력을 진단하고 계산력, 이해력, 추론력, 문제해결력의<br> 네 가지 요인별로 수리적 정보 처리 능력을 측정합니다.</span>
                      </div>
                      <div class="d-flex flex-column justify-content-start py-3 mt-1">
                        <span class="fw-bold fs-4 mt-3">▶ MPI Test의 특징은 다음과 같습니다.</span>
                        <span class="fw-border mt-3">첫째, 수학적인 원리와 개념을 정확히 알고 있는지 평가하도록 하였습니다.</span>
                        <span class="fw-border mt-3">둘째, 교육과정의 내용을 잘 이해하고 있는지 평가하도록 하였습니다.</span>
                        <span class="fw-border mt-3">셋째, 수학적 사고력, 창의력, 문제해결력의 척도를 평가하도록 하였습니다.</span>
                        <span class="fw-border mt-3">넷째, 개인별 추후 예상 등급을 제시하여 학습 방향을 제시하고 있습니다.</span>
                      </div>
                    </div>
            
                    <!-- footer -->
                    <div class="footer-container flex justify-content-center">
                      <div id="footer" class="whfooter border-t-2 py-2 mt-4"></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- 보고서 1면 -->
          <div class="carousel-item active">
            <div class="d-flex justify-content-center" v-if="carouselPage == 1" data-carousel-item>
              <div id="capture-area1" class="A4plus-size">
                <div class="d-flex flex-column justify-content-center px-4 shadow bg-dark w-100 h-100">
                  <div class="inside-area border border-light rounded bg-white d-flex flex-column">

                    <!-- header -->
                    <div class="headerbox d-flex justify-content-between bg-secondary mb-2">
                      <div class="d-flex flex-column">
                        <div id="top-mpi-title" class="fw-border text-center pt-2">
                          <span class="text-white">MPI</span> <span class="text-secondary-emphasis">TEST</span>
                        </div>
                        <div class="fs-6 fw-bolder text-center text-black" style="padding-top: 0; padding-bottom: 0.25rem;">
                          Mathematical Potential Index
                        </div>
                      </div>          
                      <div class="d-flex flex-column justify-content-center pt-1">
                        <div class="fs-1 fw-medium text-center text-warning">
                          수학적 잠재역량 평가
                        </div>
                      </div>
                      <div class="d-flex flex-column justify-content-center">
                        <div class="d-flex justify-content-center text-center text-white">
                          <div class="d-flex flex-column justify-content-center">
                            <div class="">
                              초등학교 <span class="text-info">[[ StudentGrade ]]</span>학년
                            </div>
                            <div class="">
                              <span class="text-warning">[[ ExamGrade ]]</span>학년 시험지
                            </div>
                          </div>
                          <div class="fs-2 fw-bold text-center">
                            [[ StudentName ]]
                          </div>
                        </div>
                        <div class="fs-6 fw-bold text-center bg-white text-secondary">
                          진단일 : [[ TestDate ]]
                        </div>
                      </div>
                    </div>

                    <!-- Main : Score / Math Ability / Predict Grades -->
                    <div class="d-flex justify-content-around p-5">
                      <!-- 원점수 / 백분위 -->
                      <div class="d-flex flex-column mt-5">
                        <div class="d-flex flex-column pb-3 text-center">
                          <div class="fw-bold fs-2">원점수</div>
                          <div id="total-score" class="fw-bold text-danger">[[ Score ]]</div>
                        </div>
                        <div class="d-flex flex-column pt-3 text-center">
                          <div class="fw-bold fs-2">전국 백분위</div>
                          <div id="national-percentile" class="fw-bold text-primary">[[ NationalPredictRatio ]]</div>
                        </div>
                      </div>
                      <!-- 종합적 수학 능력 -->
                      <div class="d-flex flex-column py-4 px-3">
                        <div class="fw-bolder fs-4 text-center">종합적 수학 능력</div>
                        <div>
                          <div class="fw-bolder fs-5 pb-2">종합 능력</div>
                          <div class="d-flex pb-1">
                            <div id="score-low" ref="totalScoreLow" class="fw-bolder px-4">하</div>
                            <div id="score-low-mid" ref="totalScoreLowMid" class="fw-bolder px-3">중하</div>
                            <div id="score-mid" ref="totalScoreMid" class="fw-bolder px-4">중</div>
                            <div id="score-mid-high" ref="totalScoreMidHigh" class="fw-bolder px-3">중상</div>
                            <div id="score-high" ref="totalScoreHigh" class="fw-bolder px-4">상</div>
                          </div>
                        </div>
                        <div>
                          <div class="fw-bolder fs-5 py-2">세부 능력</div>
                          <div class="fw-bolder fs-6 py-1">계산력</div>
                          <div class="d-flex">
                            <div id="score-low" ref="calculScoreLow" class="fw-bolder px-4">하</div>
                            <div id="score-low-mid" ref="calculScoreLowMid" class="fw-bolder px-3">중하</div>
                            <div id="score-mid" ref="calculScoreMid" class="fw-bolder px-4">중</div>
                            <div id="score-mid-high" ref="calculScoreMidHigh" class="fw-bolder px-3">중상</div>
                            <div id="score-high" ref="calculScoreHigh" class="fw-bolder px-4">상</div>
                          </div>
                          <div class="fw-bolder fs-6 py-1">이해력</div>
                          <div class="d-flex">
                            <div id="score-low" ref="understandingScoreLow" class="fw-bolder px-4">하</div>
                            <div id="score-low-mid" ref="understandingScoreLowMid" class="fw-bolder px-3">중하</div>
                            <div id="score-mid" ref="understandingScoreMid" class="fw-bolder px-4">중</div>
                            <div id="score-mid-high" ref="understandingScoreMidHigh" class="fw-bolder px-3">중상</div>
                            <div id="score-high" ref="understandingScoreHigh" class="fw-bolder px-4">상</div>
                          </div>
                          <div class="fw-bolder fs-6 py-1">추론력</div>
                          <div class="d-flex">
                            <div id="score-low" ref="inferenceScoreLow" class="fw-bolder px-4">하</div>
                            <div id="score-low-mid" ref="inferenceScoreLowMid" class="fw-bolder px-3">중하</div>
                            <div id="score-mid" ref="inferenceScoreMid" class="fw-bolder px-4">중</div>
                            <div id="score-mid-high" ref="inferenceScoreMidHigh" class="fw-bolder px-3">중상</div>
                            <div id="score-high" ref="inferenceScoreHigh" class="fw-bolder px-4">상</div>
                          </div>
                          <div class="fw-bolder fs-6 py-1">문제해결력</div>
                          <div class="d-flex">
                            <div id="score-low" ref="probsolScoreLow" class="fw-bolder px-4">하</div>
                            <div id="score-low-mid" ref="probsolScoreLowMid" class="fw-bolder px-3">중하</div>
                            <div id="score-mid" ref="probsolScoreMid" class="fw-bolder px-4">중</div>
                            <div id="score-mid-high" ref="probsolScoreMidHigh" class="fw-bolder px-3">중상</div>
                            <div id="score-high" ref="probsolScoreHigh" class="fw-bolder px-4">상</div>
                          </div>
                        </div>
                      </div>
                      <!-- 학업적 예상 위치 -->
                      <div class="d-flex flex-column py-4 px-3">
                        <div class="fw-bolder fs-4 text-center">학업적 예상 위치</div>
                        <div class="fw-bolder fs-5 py-2">중학교 내신 예상 백분위</div>
                        <div class="d-flex justify-content-center">
                          <div class="fw-bold fs-3" style="color: #06b6d4;">[[ selectedTerritory_low ]]</div>
                          <div class="fw-bold fs-3" style="color: #06b6d4;">~</div>
                          <div class="fw-bold fs-3" style="color: #06b6d4;">[[ selectedTerritory_high ]]</div>
                        </div>
                        <div class="d-flex bg-warning align-items-center" style="height:20px">
                          <div ref="midbarElement" class="midperleft h-75" style="background-color: #06b6d4;"></div>
                        </div>
                        <div class="fw-bolder fs-5 py-2">고1 내신 예상 등급</div>
                        <div class="fw-bold fs-3 text-center" style="color: #ec4899;">[[ HighSchoolPredictGrade[1] ]] ~ [[ HighSchoolPredictGrade[0] ]]</div>
                        <div class="d-flex bg-warning align-items-center" style="height:20px">
                          <div ref="highbarElement" class="highperleft h-75" style="background-color: #06b6d4; width:90%;"></div>
                        </div>
                        <div class="fw-bolder fs-5 py-2">수능 예상 등급</div>
                        <div class="fw-bold fs-3 text-center" style="color: #ec4899;">[[ SuneungPredictGrade ]]</div>
                        <div class="d-flex bg-warning align-items-center" style="height:20px">
                          <div ref="suneungbarElement" class="suneungperleft h-75" style="background-color: #06b6d4;"></div>
                        </div>
                      </div>
                    </div>

                    <!-- Graph : Math Ability Detail -->
                    <div class="d-flex justify-content-center w-100 mt-3 mb-4">
                      <div class="d-flex flex-column pb-3 mx-1 mb-0" style="margin-bottom: 0.125rem !important;">

                        <!-- math ability data numbers -->
                        <div class="d-flex justify-content-center">
                          <div class="d-flex flex-column w-75 pb-3 mx-1 mb-0" style="margin-bottom: 0.125rem !important;">
                            <div class="d-flex justify-content-center">
                              <div class="mt-3 mb-2 fs-2 fw-bold align-items-center">수학적 잠재역량 분석</div>
                            </div>
                            <div class="mb-1 d-flex justify-content-around">
                              <div class="d-flex flex-column align-items-center">
                                <span class="fs-5 fw-bold text-black border-bottom border-2">원점수</span>
                                <span class="ms-3 fs-2 fw-bold text-danger">[[ Score ]]</span>
                              </div>
                              <div class="d-flex flex-column align-items-center">
                                <span class="fs-5 fw-bold text-black border-bottom border-2">계산력</span>
                                <span class="ms-3 fs-2 fw-bold text-danger">[[ MathAbility[0] ]]</span>
                              </div>
                              <div class="d-flex flex-column align-items-center">
                                <span class="fs-5 fw-bold text-black border-bottom border-2">이해력</span>
                                <span class="ms-3 fs-2 fw-bold text-danger">[[ MathAbility[1] ]]</span>
                              </div>
                              <div class="d-flex flex-column align-items-center">
                                <span class="fs-5 fw-bold text-black border-bottom border-2">추론력</span>
                                <span class="ms-3 fs-2 fw-bold text-danger">[[ MathAbility[2] ]]</span>
                              </div>
                              <div class="d-flex flex-column align-items-center">
                                <span class="fs-5 fw-bold text-black border-bottom border-2">문제해결력</span>
                                <span class="ms-3 fs-2 fw-bold text-danger">[[ MathAbility[3] ]]</span>
                              </div>
                            </div>
                          </div>
                        </div>
                        
                        <!-- chart and analysis -->
                        <div class="d-flex justify-content-around">
                          <div class="d-flex flex-column" style="margin-bottom: 0.125rem !important;">
                            <div class="#">
                              <canvas id="radarChart"></canvas>
                            </div>
                          </div>
                          <div class="d-flex flex-column justify-content-around text-xs" style="width: 60%;">
                            <div class="d-flex justify-content-between w-100">
                              <div class="d-flex justify-content-between align-self-center bg-light" style="width: 30%; height: 2rem;">
                                <div class="align-self-center ms-1  fw-semibold" style="font-size: 0.875rem;">
                                  계산력
                                </div>
                                <div class="d-flex justify-content-center align-self-center" style="width: 33.33%;">
                                  <span class="text-danger" style="font-size: 1.125rem;">[[ MathAbility[0] ]]</span>
                                </div>
                              </div>
                              <div class="mx-2 align-self-center fw-bold" style="width: 100%;">
                                수학의 가장 밑바탕이 되는 능력으로 수학적 능력을 향상시키는데 있어 가장 기본이며 근본적인 것
                              </div>
                            </div>
                            <div class="d-flex justify-content-between w-100">
                              <div class="d-flex justify-content-between align-self-center bg-light" style="width: 30%; height: 2rem;">
                                <div class="align-self-center ms-1  fw-semibold" style="font-size: 0.875rem;">
                                  이해력
                                </div>
                                <div class="d-flex justify-content-center align-self-center" style="width: 33.33%;">
                                  <span class="text-danger" style="font-size: 1.125rem;">[[ MathAbility[1] ]]</span>
                                </div>
                              </div>
                              <div class="mx-2 align-self-center fw-bold" style="width: 100%;">
                                수학적 기본 개념과 원리가 갖는 의미를 파악하고, 문제의 핵심을 수학적 상황으로 생각할 수 있는 능력
                              </div>
                            </div>
                            <div class="d-flex justify-content-between w-100">
                              <div class="d-flex justify-content-between align-self-center bg-light" style="width: 30%; height: 2rem;">
                                <div class="align-self-center ms-1  fw-semibold" style="font-size: 0.875rem;">
                                  추론력
                                </div>
                                <div class="d-flex justify-content-center align-self-center" style="width: 33.33%;">
                                  <span class="text-danger" style="font-size: 1.125rem;">[[ MathAbility[2] ]]</span>
                                </div>
                              </div>
                              <div class="mx-2 align-self-center fw-bold" style="width: 100%;">
                                수학의 개념과 원리를 바탕으로 상호 관련성 속에서 문제 해결에 필요한 원리와 개념을 찾는 수학적 사고 능력
                              </div>
                            </div>
                            <div class="d-flex justify-content-between w-100">
                              <div class="d-flex justify-content-between align-self-center bg-light" style="width: 30%; height: 2rem;">
                                <div class="align-self-center ms-1  fw-semibold" style="font-size: 0.875rem;">
                                  문제해결력
                                </div>
                                <div class="d-flex justify-content-center align-self-center" style="width: 33.33%;">
                                  <span class="text-danger" style="font-size: 1.125rem;">[[ MathAbility[3] ]]</span>
                                </div>
                              </div>
                              <div class="mx-2 align-self-center fw-bold" style="width: 100%;">
                                수학적 개념과 원리를 바탕으로 문제해결법을 찾아내며 결과의 적합성과 유용성 등을 점검할 수 있는 능력
                              </div>
                            </div>
                          </div>
                          
                        </div>
                      </div>
                    </div>
            
                    <!-- footer -->
                    <div class="footer-container flex justify-content-center border-top border-2 ">
                      <div id="footer" class="whfooter border-t-2 py-2 my-1"></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- 보고서 2면 -->
          <div class="carousel-item active">
            <div class="d-flex justify-content-center" v-if="carouselPage == 2" data-carousel-item>
              <div id="capture-area2" class="A4plus-size">
                <div class="d-flex flex-column justify-content-center px-4 shadow bg-dark w-100 h-100">
                  <div class="inside-area border border-light rounded bg-white d-flex flex-column">
            
                    <!-- header -->
                    <div class="d-flex justify-content-between border-bottom border-4 border-gray-400">
                      <div class="d-flex">
                        <div id="logo" class="fs-4 fw-bold mt-3 ms-5 px-4"></div>
                        <div class="fs-4 fw-bold pt-3">
                          PNS수학
                        </div>
                      </div>          
                      <div class="#">
                        <p class="fs-4 fw-bold pt-3 px-5">
                          수학 완전학습
                        </p>
                      </div>
                    </div>
            
                    <!-- O/X analysis -->
                    <div class="d-flex justify-content-between flex-column">
                      <!-- O/X title -->
                      <div class="d-flex justify-content-evenly align-items-center mt-3 mb-1">
                        <div class="w-25 h-auto border-bottom border-2 text-center my-1 fs-4 fw-bold" style="height: 2.5rem;">
                          오답 문항 분석 자료
                        </div>
                      </div>
            
                      <!-- O/X table-->
                      <div class="">
                        <div class="">
                          <div class="">
                            <!-- <table class="table table-striped-columns fixed-tabel table-sm text-center"> -->
                            <table class="table table-striped fixed-tabel table-sm text-center">
                              <thead class="table-dark">
                                <tr>
                                  <th scope="col" class="text-white">번호</th>
                                  <th scope="col" v-for="number in 14" :key="'header-' + number" class="text-center custom-col text-white">[[ number ]]</th>
                                </tr>
                              </thead>
                              <tbody>
                                <tr>
                                  <th scope="row">배점</th>
                                  <td v-for="(score, index) in 14" :key="'score-' + index" class="text-center custom-col">4</td>
                                </tr>
                                <tr>
                                  <th scope="row">정답</th>
                                  <td v-for="(input, index) in AnswerList1" :key="'answer-' + index" class="text-center custom-col">[[ input ]]</td>
                                </tr>
                                <tr class="border-bottom border-2">
                                  <th scope="row">학생답</th>
                                  <td  v-for="(answer, index) in ExamResults1" :key="'result-'+index" class="text-center custom-col">[[ answer ]]</td>
                                </tr>
                                <tr class="table-dark">
                                  <td scope="col" class=" fw-bold text-white">번호</td>
                                  <td scope="col" v-for="number in rangeNumbers" :key="'header-' + number" class="text-center custom-col fw-bolder text-white">[[ number ]]</td>
                                  <td scope="col" class="fw-bold">점수</td>                      
                                  <td scope="col" class="fw-bold">총점</td>
                                  <td scope="col"></td>
                                </tr>
                                <tr>
                                  <th scope="row">배점</th>
                                  <td v-for="(score, index) in 11" :key="'score-' + index" class="text-center custom-col">4</td>
                                  <td scope="col" class="fw-bold">[[ Score ]]</td>
                                  <td scope="col">100</td>
                                  <td scope="col"></td>
                                </tr>
                                <tr>
                                  <th scope="row">정답</th>
                                  <td v-for="(input, index) in AnswerList2" :key="'answer-' + index" class="text-center custom-col">[[ input ]]</td>
                                  <td scope="row" class="custom-col"></td>
                                  <td scope="row" class="custom-col"></td>
                                  <td scope="row" class="custom-col"></td>
                                </tr>
                                <tr>
                                  <th scope="row">학생답</th>
                                  <td  v-for="(answer, index) in ExamResults2" :key="'result-'+index" class="text-center custom-col">[[ answer ]]</td>
                                  <td scope="row" class="custom-col"></td>
                                  <td scope="row" class="custom-col"></td>
                                  <td scope="row" class="custom-col"></td>
                                </tr>
                              </tbody>
                            </table>
                          </div>
                        </div>
                      </div>
                    </div>
            
                    <!-- strong and weak points -->
                    <div class="d-flex justify-content-center">
                      <div class="w-100 h-100 border-bottom border-2">
                        <div class="d-flex flex-column justify-content-center h-100 py-2 mt-1">
                          <div class="d-flex justify-content-center pb-2 border-bottom border-2">
                            <div class="border-bottom border-2 text-center w-25 fs-4 fw-bold">
                              강점 및 약점 분석
                            </div>
                          </div>
                          <div class="px-3 d-flex pt-2">
                            <div class="w-8 border-right border-2 d-flex flex-column justify-content-center">
                              <div class="fw-bold ps-3">강점</div>
                            </div>
                            <ul v-if="StrongPoint && StrongPoint.length"
                              class="d-flex flex-column justify-content-start w-100 pt-2">
                              <li v-for="(item, index) in StrongPoint" :key="'strong-' + index" class="list-unstyled fs-6">
                                &ensp;&#149;&nbsp;[[ item ]]
                              </li>
                            </ul>
                            <div v-else>강점이 없습니다</div>
                          </div>
                          <div class="px-3 d-flex pt-2 border-top border-2">
                            <div class="w-8 border-right border-2 d-flex flex-column justify-content-center">
                              <div class="fw-bold ps-3">약점</div>
                            </div>
                            <ul v-if="WeakPoint && WeakPoint.length"
                              class="d-flex flex-column justify-content-start w-100 pt-2">
                              <li v-for="(item, index) in WeakPoint" :key="'weak-' + index" class="list-unstyled fs-6">
                                &ensp;&#149;&nbsp;[[ item ]]
                              </li>
                            </ul>
                            <div v-else>약점이 없습니다</div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <!-- footer -->
                    <div class="footer-container flex justify-content-center">
                      <div id="footer" class="whfooter border-t-2 my-1"></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- 보고서 3면 -->
          <div class="carousel-item active">
            <div class="d-flex justify-content-center" v-if="carouselPage == 3" data-carousel-item>
              <div id="capture-area3" class="A4plus-size">
                <div class="d-flex flex-column justify-content-center px-4 shadow bg-dark w-100 h-100">
                  <div class="inside-area border border-light rounded bg-white d-flex flex-column">
            
                    <!-- header -->
                    <div class="d-flex justify-content-between border-bottom border-4 border-gray-400">
                      <div class="d-flex">
                        <div id="logo" class="fs-4 fw-bold mt-3 ms-5 px-4"></div>
                        <div class="fs-4 fw-bold pt-3">
                          PNS수학
                        </div>
                      </div>          
                      <div class="#">
                        <p class="fs-4 fw-bold pt-3 px-5">
                          수학 완전학습
                        </p>
                      </div>
                    </div>
            
                    <!-- Office Regional Predict Percentile -->
                    <div class="border-bottom border-2">
                      <div class="w-40 h-10 d-flex justify-content-evenly mt-3 mb-1">
                        <div class="border-2 border-bottom p-3 my-1 fs-5 fw-bold">
                          교육청 권역별 예상 백분위
                        </div>
                      </div>
                      <div class="d-flex justify-content-center">
                        <div class="d-flex justify-content-center align-items-center w-100 my-2 py-3 container">
                          <div class="d-flex justify-content-center align-items-center w-100 border-2 row">
                            <div v-for="(region, index) in OfficeRegion" :key="index" class="d-flex justify-content-center col-md-6 align-items-center my-2" style="width: 18rem;">
                              <div class="card align-items-center">
                                <div class="card-body d-flex row justify-content-center w-100">
                                  <div class="d-flex justify-content-center align-items-center">
                                    <h5 class="card-title text-center">[[ region ]]</h5>
                                  </div>
                                  <div class="d-flex justify-content-between w-100 h-auto">
                                    <div class="card-text text-center flex-grow-1 text-warning bg-yellow-200">[[ otherTerritories_low[index].value ]]</div>
                                    <div class="card-text text-center flex-grow-1 text-blue-500 bg-cyan-200">[[ otherTerritories_high[index].value ]]</div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <!-- <div class="d-flex justify-content-center"> -->
                        <div class="d-flex justify-content-evenly align-items-center">
                          <!-- <canvas :id="'horizontalBarChart' + index"></canvas> -->
                          <canvas id="horizontalBarChart" class="mx-5 my-3"></canvas>
                        </div>
                    </div>
            
                    <!-- footer -->
                    <div class="footer-container flex justify-content-center">
                      <div id="footer" class="whfooter border-t-2 py-2 my-1"></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="d-flex flex-column justify-content-center mx-5">
      <div class="align-items-center">
        <button class="btn btn-dark" @click="carouselPageRight">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Next</span>
        </button>
      </div>
    </div>
  </div>

  <div class="d-flex justify-content-center my-2">
    <button type="button" 
            :class="[carouselPage === 1 ? 'carouselcontrolbutton btn btn-info' : 'carouselcontrolbutton btn btn-secondary']" 
            @click="carouselControl(1)">1</button>
    <button type="button" 
            :class="[carouselPage === 2 ? 'carouselcontrolbutton btn btn-info' : 'carouselcontrolbutton btn btn-secondary']" 
            @click="carouselControl(2)">2</button>
    <button type="button" 
            :class="[carouselPage === 3 ? 'carouselcontrolbutton btn btn-info' : 'carouselcontrolbutton btn btn-secondary']" 
            @click="carouselControl(3)">3</button>
  </div>

  <div class="d-flex justify-content-center">
    <button type="button" class="btn btn-primary pdfdown fs-4 mb-5" @click="captureAndDownload">pdf 다운로드</button>
  </div>
</div>


{% endblock %}

{% block extra-script %}
{% include 'include/test_result_vue.html' %}
{% endblock %}